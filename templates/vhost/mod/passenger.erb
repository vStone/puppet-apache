<%
  def onoff (var)
    return var if var.is_a?(String)
    if var == true or var == false
      return 'on' if var
      return 'off'
    end
  end
-%>

<% if approot != '' -%>
  PassengerAppRoot <%= approot %>
<% end -%>
<% if spawnmethod != '' -%>
  PassengerSpawnMethod <%= spawnmethod %>
<% end -%>
<% if globalqueue != '' -%>
  PassengerUseGlobalQueue <%= onoff(globalqueue) -%>
<% end -%>
<% if passengerenabled != '' -%>
  PassengerEnabled <%= onoff(passengerenabled) %>
<% end -%>
<% if uploadbufferdir != '' -%>
  PassengerUploadBufferDir <%= uploadbufferdir -%>
<% end -%>
<% if restartdir != '' -%>
  PassengerRestartDir <%= restartdir %>
<% end -%>
<% if friendlyerrorpages != '' -%>
  PassengerFriendlyErrorPages <%= onoff(friendlyerrorpages) %>
<% end -%>
<% if bufferresponse != '' -%>
  PassengerBufferResponse <%= onoff(bufferresponse) %>
<% end -%>
<% if user != '' -%>
  PassengerUser <%= user %>
<% end -%>
<% if group != '' -%>
  PassengerGroup <%= group %>
<% end -%>

<% if has_variable?('min_instances') and min_instances != '' -%>
  PassengerMinInstances <%= min_instances %>
<% end -%>
<% if has_variable?('max_requests') and max_requests != '' -%>
  PassengerMaxRequests <%= max_requests %>
<% end -%>
<% if has_variable?('stat_throttle_rate') and stat_throttle_rate != '' -%>
  PassengerStatThrottleRate <%= stat_throttle_rate %>
<% end -%>
<% if has_variable?('pre_start') and pre_start != '' -%>
  PassengerPreStart <%= pre_start %>
<% end -%>
<% if has_variable?('high_performance') -%>
  PassengerHighPerformance <%= onoff(high_performance) %>
<% end -%>
<% if has_variable?('rails_autodetect') -%>
  RailsAutoDetect <%= onoff(rails_autodetect) %>
<% end -%>
<% if has_variable?('rails_baseuri') and rails_baseuri != ''
    rails_baseuri = [ rails_baseuri ] unless rails_baseuri.is_a?(Array)
    rails_baseuri.each do |uri| 
-%>
  RailsBaseUri <%= uri %>
<%  end -%>
<% end -%>
<% if has_variable?('rails_env') and rails_env != ''
    rails_env = [ rails_env ] unless rails_env.is_a?(Array)
    rails_env.each do |env|
-%>
  RailsEnv <%= env %>
<%  end -%>
<% end -%>
<% if has_variable?('rack_autodetect') -%>
  RackAutoDetect <%= onoff(rack_autodetect) %>
<% end -%>
<% if has_variable?('rack_baseuri') and rack_baseuri != ''
    rack_baseuri = [ rack_baseuri ] unless rack_baseuri.is_a?(Array)
    rack_baseuri.each do |uri|
-%>
  RackBaseUri <%= uri %>
<%  end -%>
<% end -%>
<% if has_variable?('rack_env') and rack_env != ''
    rack_env = [ rack_env ] unless rack_env.is_a?(Array)
    rack_env.each do |env|
-%>
  RackEnv <%= env %>
<%  end -%>
<% end -%>

